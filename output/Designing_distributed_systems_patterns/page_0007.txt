Hands On: Deploying an Ambassador and Memcache for a Sharded Cache   63
An Examination of Sharding Functions                                                                     66
Selecting a Key                                                                                                            67
Consistent Hashing Functions                                                                                 68
Hands On: Building a Consistent HTTP Sharding Proxy                                   69
Sharded, Replicated Serving                                                                                         70
Hot Sharding Systems                                                                                                   70
7. Scatter/Gather. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  73
Scatter/Gather with Root Distribution                                                                       74
Hands On: Distributed Document Search                                                             75
Scatter/Gather with Leaf Sharding                                                                              76
Hands On: Sharded Document Search                                                                   77
Choosing the Right Number of Leaves                                                                   78
Scaling Scatter/Gather for Reliability and Scale                                                        79
8. Functions and Event-Driven Processing. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  81
Determining When FaaS Makes Sense                                                                       82
The Benefits of FaaS                                                                                                   82
The Challenges of FaaS                                                                                              82
The Need for Background Processing                                                                     83
The Need to Hold Data in Memory                                                                         83
The Costs of Sustained Request-Based Processing                                               84
Patterns for FaaS                                                                                                            84
The Decorator Pattern: Request or Response Transformation                           85
Hands On: Adding Request Defaulting Prior to Request Processing                 86
Handling Events                                                                                                         87
Hands On: Implementing Two-Factor Authentication                                        87
Event-Based Pipelines                                                                                                89
Hands On: Implementing a Pipeline for New-User Signup                                 89
9. Ownership Election. . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . . .  93
Determining If You Even Need Master Election                                                       94
The Basics of Master Election                                                                                      95
Hands On: Deploying etcd                                                                                       97
Implementing Locks                                                                                                  98
Hands On: Implementing Locks in etcd                                                               100
Implementing Ownership                                                                                       101
Hands On: Implementing Leases in etcd                                                              102
Handling Concurrent Data Manipulation                                                               103
Table of Contents 
| 
v
