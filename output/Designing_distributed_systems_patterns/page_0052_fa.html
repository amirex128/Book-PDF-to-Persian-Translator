<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 52</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <p>
   <pre><code class="language-go">
fmt.Printf("Error opening database: %v", err)
 
}
 // Simple web handler that runs the query
 
http.HandleFunc("", func(res http.ResponseWriter, req *http.Request) {
 
 
_, err := db.Exec(*query)
 
 
if err != nil {
 
 
 
res.WriteHeader(http.StatusInternalServerError)
 
 
 
res.Write([]byte(err.Error()))
 
 
 
return
 
 
}
 
 
res.WriteHeader(http.StatusOK)
 
 
res.Write([]byte("OK"))
 
 
return
 
})
 // Startup the server
 
http.ListenAndServe(*addr, nil)
}
 </code></pre>
  </p>
  <p>
   سپس می‌توانیم این را به یک container image بسازیم و آن را به یک pod که شبیه این است، بکشیم:
  </p>
  <pre><code class="language-yaml">
apiVersion: v1
kind: Pod
metadata:
  name: adapter-example-health
  namespace: default
spec:
  containers:
  - image: mysql
    name: mysql
  - image: brendanburns/mysql-adapter
    name: adapter
 </code></pre>
  <p>
   به این ترتیب، <em>mysql container</em> بدون تغییر باقی می‌ماند، اما بازخورد دلخواه درباره health از <em>mysql server</em> همچنان می‌تواند از <em>adapter container</em> به‌دست آید.
  </p>
  <p>
   هنگامی که به این application از <strong>adapter pattern</strong> نگاه می‌کنیم، ممکن است به نظر برسد که اعمال این pattern غیرضروری است. بدیهی است که می‌توانستیم image سفارشی خودمان را بسازیم که می‌دانست چگونه health check را برای <em>mysql instance</em> خود انجام دهد.
  </p>
  <p>
   در حالی که این درست است، این متد مزایای قوی‌ای را که از modularity ناشی می‌شود، نادیده می‌گیرد. اگر هر developer، container خاص خود را با health checking داخلی پیاده‌سازی کند، هیچ فرصتی برای استفاده مجدد یا اشتراک‌گذاری وجود ندارد.
  </p>
  <p>
   در مقابل، اگر از الگوهایی مانند <strong>adapter</strong> برای توسعه راه‌حل‌های modular که شامل چندین container هستند استفاده کنیم، کار به‌طور ذاتی از هم جدا شده و به‌راحتی به اشتراک گذاشته می‌شود. یک adapter که برای health check از <em>mysql</em> توسعه داده شده است، یک module است که می‌تواند توسط افراد مختلف به اشتراک گذاشته و استفاده مجدد شود. علاوه‌براین، افراد می‌توانند <strong>adapter pattern</strong> را با استفاده از این health-checking container مشترک، بدون داشتن دانش عمیق در مورد چگونگی health check یک <em>mysql database</em>، اعمال کنند. بنابراین modularity و <strong>adapter pattern</strong> خدمت می‌کنند
  </p>
  <p>
   <strong>Chapter 4: Adapters</strong>
  </p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>