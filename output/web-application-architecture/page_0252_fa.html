<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 252</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>
        فصل را با متد OrderController::orderEbookAction() شروع کردیم که شامل تمام مراحل سناریوی "order an e-book" بود. شکل 9.7 وضعیت اولیه را نشان می‌دهد. اگرچه controller به یک abstraction ارائه شده توسط core وابسته است، خود use case متاسفانه بخشی از infrastructure است. این بدان معنی است که ما نمی‌توانیم به راحتی آن را فراخوانی کنیم، بدون اینکه infrastructure code دیگری را راه‌اندازی و اجرا کنیم.
    </p>
    <p>
        <img src="https://via.placeholder.com/300" alt="Figure 9.7. The use case is currently tied to a particular infrastructure, mak-ing it hard to invoke in other situations.">
        <figcaption>شکل 9.7. The use case در حال حاضر به یک infrastructure خاص گره خورده است و فراخوانی آن را در موقعیت‌های دیگر دشوار می‌کند.</figcaption>
    </p>
    <p>
        پس از چند مرحله refactoring، ما توانستیم یک use case service را از controller استخراج کنیم. این service اکنون به عنوان core code محسوب می‌شود، زیرا دیگر به هیچ عنصر زیرساختی وابسته نیست. input آن داده‌های ساده است، نه یک شیء HTTP Request یا چیزی شبیه به آن. این فقط data را در حافظه دستکاری می‌کند و فقط با abstractions مانند OrderRepository صحبت می‌کند. شکل 9.8 نتیجه عملیات را نشان می‌دهد.
    </p>
    <p>
        باز هم، فلش‌های dependency فقط به سمت core code اشاره می‌کنند. این بدان معناست که علاوه بر اینکه می‌توانیم infrastructure code را در سمت راست به طور کامل جایگزین کنیم، اکنون می‌توانیم کد را در سمت چپ نیز جایگزین کنیم. ما می‌توانیم از همان use case با یک "front-end" متفاوت، مانند یک API endpoint یا یک batch importer، استفاده مجدد کنیم. شاید ما حتی CLI commands بسازیم که به ما امکان می‌دهد برخی از use cases application را از terminal تست کنیم. test suite application اساساً یک infrastructure جایگزین برای core code ما نیز خواهد بود.
        این ورودی را برای use cases فراهم می‌کند و نتایج فراخوانی را تأیید می‌کند
    </p>
</div>

        </div>
    </div>
    <div class="page-images">
        <div class="page-image"><img src="page_0252/image_1.png" alt="Image from page 252" /></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>