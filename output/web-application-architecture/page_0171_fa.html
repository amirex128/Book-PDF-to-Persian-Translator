<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 171</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3> External services</h3>
  <p>این یک متد عمومی‌تر، احتمالاً قابل استفاده مجددتر نسبت به متدی است که قبلاً پیشنهاد کردیم. این جنبه خاص "کتاب الکترونیکی" را از متد اصلی حذف می‌کند: <code>vatRateForSellingEbooksInCountry()</code>. اما یک پارامتر اضافی معرفی می‌کند که آن را به پیاده‌سازی مبتنی بر <code>vatapi.com</code> ما متصل می‌کند. به احتمال زیاد، پارامتر <code>$filter</code> پس از اینکه ما از <code>vatapi.com</code> دور شدیم و شروع به استفاده از یک <strong>API</strong> دیگر کردیم، هیچ استفاده‌ای نخواهد داشت. شاید ما حتی باید نتیجه بگیریم که خاص بودن کتاب الکترونیکی یک مزیت از <strong>interface</strong> بود، زیرا جنبه فیلترینگ را در خود نام متد کدگذاری کرده بود. این به کلاس پیاده‌سازی اجازه می‌دهد تا خود از فیلترینگ واقعی مراقبت کند، بدون اینکه <strong>client</strong> نگران آن باشد.</p>
  <h4> 6.4. Testing</h4>
  <p>تا کنون ما چندین نمونه از تقسیم کد اصلی و کد زیرساخت را دیده‌ایم. ما همچنین دیده‌ایم که چگونه انجام این کار بر <strong>tests</strong> که برای کد خود ایجاد می‌کنید، تأثیر می‌گذارد. کد اصلی کدی است که از <strong>IO</strong> (شبکه، سیستم فایل و غیره) استفاده نمی‌کند. بنابراین، کد را می‌توان به طور کامل در انزوا آزمایش کرد. شما به هیچ راه‌اندازی خاصی نیاز ندارید. کافی است <strong>object</strong> را نمونه‌سازی کنید، یک متد را روی آن فراخوانی کنید و نتیجه را با آنچه انتظار دارید مقایسه کنید. این <strong>tests</strong> بازخورد سریع را در حین توسعه کد به شما می‌دهند. آنها به دلایل عجیب و غریب شکست نمی‌خورند، مانند مشکلات <strong>concurrency</strong>، یا یک <strong>service</strong> از راه دور که از کار افتاده است یا به روش‌های غیرمنتظره‌ای پاسخ می‌دهد. شما فقط در حال انجام دستکاری روی داده‌ها در حافظه هستید، که یک فرآیند قطعی است.</p>
  <p>این ویژگی‌های <strong>tests</strong> جدا شده بسیار مطلوب هستند. شما می‌خواهید تعداد کلاس‌هایی را که می‌توانند مانند این آزمایش شوند، به حداکثر برسانید. جدا کردن کد اصلی از کد زیرساخت بهترین راه برای انجام این کار است. همیشه به دنبال آن بخش از منطق باشید که می‌توانید آن را به طور جداگانه آزمایش کنید و آن را به کلاس خود استخراج کنید. ما این فصل را با از بین بردن گزینه‌های خود برای آزمایش شروع کردیم، زیرا ما همه آن فراخوانی‌های <code>curl_*()</code> را درست در داخل <code>EbookOrderService</code> داشتیم. استخراج آن فراخوانی‌ها به یک کلاس جداگانه، <strong>service VatApi</strong>، ایده خوبی بود، اما هنوز چیزهای بیشتری برای آزمایش به صورت مجزا به ما نداد. تنها زمانی که ما یک <strong>abstraction</strong> برای ارائه نرخ <strong>VAT</strong> معرفی کردیم، ما به یک <code>EbookOrderService</code> قابل آزمایش بازگشتیم. هنگام آزمایش این کلاس، اکنون می‌توانیم به راحتی یک <strong>test double</strong> برای <strong>interface VatRateProvider</strong> ارائه دهیم. <strong>Listing</strong> 6.13 نشان می‌دهد که این چگونه خواهد بود. این از یک <strong>ac-</strong></p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>