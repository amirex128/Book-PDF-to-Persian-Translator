<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 205</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3> Time and randomness</h3>
  <p>می‌شود اگر ما یک <strong>test</strong> برای <code>ClockUsingSystemClock</code> بنویسیم. <strong>Listing</strong> 7.21 یک تلاش اول را نشان می‌دهد:</p>
  <p><strong>Listing</strong> 7.21. A test for <strong>ClockUsingSystemClockTest</strong>.</p>
  <pre><code class="language-php">
final class ClockUsingSystemClockTest extends TestCase
{
    /**
     * @test
     */
    public function it_returns_the_current_time(): void
    {
        $clock = new ClockUsingSystemClock();
        $actualCurrentTime = new DateTimeImmutable('now');

        self::assertEquals(
            $actualCurrentTime,
            $clock->currentTime()
        );
    }
}
</code></pre>
  <p>متأسفانه، این <strong>test</strong> هرگز پاس نمی‌شود. این به این دلیل است که بخشی از <strong>timestamp</strong> ایجاد شده توسط نمونه <code>DateTimeImmutable</code>، تعداد میکروثانیه‌هایی است که در ثانیه فعلی سپری شده است. و بین ایجاد یک نمونه در داخل <strong>test</strong> و ایجاد یک نمونه دیگر در کلاس <code>ClockUsingSystemClock</code> همیشه یک اختلاف کوچک وجود خواهد داشت. بنابراین این دو نمونه هرگز برابر نخواهند بود. با این حال، برای مفید بودن کلاس، واقعاً مهم نیست که بخش میکروثانیه‌ها چه باشد. بنابراین به جای انجام یک مقایسه کامل، ما ممکن است فقط <strong>timestamp</strong> را به ثانیه‌ها "گرد" کنیم، همانطور که در <strong>Listing</strong> 7.22 نشان داده شده است.</p>
  <p><strong>Listing</strong> 7.22. Comparing timestamps rounded to seconds</p>
  <p><code>$clock = new ClockUsingSystemClock();</code></p>
  <p><code>$actualCurrentTime = new DateTimeImmutable('now');</code></p>
  <p><code>self::assertEquals(</code></p>
  <p><code>$actualCurrentTime-&gt;format('U'),</code></p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>