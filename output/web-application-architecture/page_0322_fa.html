<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 322</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>یک adapter اغلب یک class واحد نیست. همه objects های همکار نیز باید بخشی از adapter در نظر گرفته شوند. به عنوان مثال، اگر پیاده‌سازی OrderRepository شما از Doctrine ORM برای ذخیره entity Order استفاده می‌کند، تمام Doctrine ORM باید بخشی از adapter در نظر گرفته شود. بدون آن، adapter به درستی کار نمی‌کند.</p>
    <p>از آنجایی که یک outgoing port در کد شما توسط یک interface تعریف شده است، یک option طبیعی برای ارائه implementations جایگزین برای آن interface، یا از نظر hexagonal: ارائه یک adapter جایگزین برای port، وجود دارد. این همان چیزی است که hexagonal architecture در واقع به دنبال آن است: توانایی جایگزینی adapters به منظور آسان‌تر کردن testing از هگزاگون. یک implementation جایگزین برای OrderRepository که به‌طور خاص برای testing طراحی شده است، class InMemoryOrderRepository در Listing 13.3 خواهد بود. ما از آن در بخش 14.5 استفاده خواهیم کرد.</p>
    <p>Listing 13.3. An in-memory implementation از OrderRepository.</p>
    <pre><code class="language-php">
final class InMemoryOrderRepository implements OrderRepository
{
    /**
     * @var array&lt;string,Order&gt;
     */
    private array $orders = [];
    public function save(Order $order): void
    {
        $this->orders[$order->orderId()->asString()] = $order;
    }
    public function getById(OrderId $orderId): Order
    {
        if (!isset($this->orders[$orderId->asString()])) {
            throw new RuntimeException(
                'Could not find order with ID ' . $orderId->asString()
            );
        }
        return $this->orders[$orderId->asString()];
    }
}
</code></pre>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>