<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 221</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3> Validation</h3>
  <p>جلوگیری از وقوع <strong>state transitions</strong> بد. اگر سفارشی پرداخت و تحویل داده شده باشد، دیگر نمی‌توان آن را لغو کرد. فقط یک سفارش در حال انتظار را می‌توان لغو کرد. در موقعیت‌های دیگر، شما ابتدا باید درخواست بازپرداخت کنید، یا به نوعی تحویل را برگردانید.</p>
  <p>هنگامی که شما تمام این اقدامات را اضافه کردید تا به <strong>objects</strong> اجازه دهید از حالت خود محافظت کنند، آنها کاملاً ایمن خواهند بود. هر <strong>client</strong> می‌تواند <strong>object</strong> را <strong>instantiate</strong> کند، هر متدی را روی آن فراخوانی کند، و اگر داده‌های اشتباه را ارائه دهند، یا <strong>state transition</strong> درخواستی مجاز نباشد، شکست می‌خورد و به <strong>client</strong> در مورد آنچه که اشتباه انجام داده است، اطلاع می‌دهد. این را با مثال اصلی که در آن ما از یک <strong>validator</strong> برای <strong>validate</strong> کردن <strong>object</strong> استفاده می‌کردیم، مقایسه کنید. در آن مثال، ما لیستی از <strong>errors</strong> را از <strong>validator</strong> دریافت کردیم، اما <strong>entity</strong> با این وجود در یک حالت بد قرار می‌گرفت. اکنون که <strong>entity</strong> با اولین علامت چیزی که اشتباه است با صدای بلند شکست می‌خورد، ما به آنچه می‌خواستیم دست یافتیم. ما اکنون می‌توانیم مطمئن باشیم که هر داده‌ای که به یک <strong>property</strong> از <strong>entity</strong> اختصاص داده می‌شود، صحیح و سازگار است. بنابراین اگر ما (تصادفاً یا عمداً) آن را در <strong>database</strong> ذخیره کنیم، به داده‌های خراب ختم نخواهیم شد.</p>
  <p>خب، یک سناریو وجود دارد که ما آن را پوشش ندادیم که ممکن است هنوز به ما داده‌های خراب بدهد. یک <strong>entity</strong> می‌تواند بیشتر داده‌هایی را که به عنوان آرگومان‌های <strong>constructor</strong> یا متد به آن منتقل می‌شود، <strong>validate</strong> کند. اما نمی‌تواند همه چیز را <strong>validate</strong> کند، زیرا نمی‌تواند فراتر از خودش و داده‌های ارائه شده به آن نگاه کند. یک مثال، پارامتر <code>EbookId</code> متد <code>addLine()</code> است (<strong>Listing</strong> 8.6): <code>Order</code> نمی‌تواند به تنهایی تشخیص دهد که آیا یک <code>EbookId</code> داده شده به یک کتاب الکترونیکی واقعی در کاتالوگ ما اشاره دارد یا خیر.</p>
  <p><strong>Listing</strong> 8.6. Does the provided <code>EbookId</code> refer to an actual e-book?</p>
  <pre><code class="language-php">
final class Order
{
    // ...
    public function addLine(EbookId $ebookId, int $quantity): void
    {
        /*
         * There's no way to verify that the provided ID refers to
         * an actual e-book from our catalog...
         */
</code></pre>
  <p>حتی این واقعیت که ما از یک <strong>object value</strong> برای نشان دادن شناسه‌ کتاب الکترونیکی استفاده می‌کنیم</p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>