<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 272</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <pre><code class="language-php">
    $this->events = [];
    return $events;
}
</code></pre>
    <h4><strong>11.3. Repositories</strong></h4>
    <p>هر entity به یک repository نیاز دارد. از آنجایی که یک repository از مرز application عبور می‌کند تا entities را ذخیره و بارگیری کند، باید یک service abstraction باشد. این بدان معناست که repository باید به عنوان یک interface تعریف شود (به عنوان مثال OrderRepository). همچنین به یک implementation استاندارد نیاز دارد که interface و contract توصیف شده توسط آن را پیاده‌سازی کند. چندین design جایگزین برای repositories وجود دارد، اما من ساده‌ترین آن‌ها را ترجیح می‌دهم. این تمایزی بین اضافه کردن و update کردن entities قائل نمی‌شود (به Listing 11.5 مراجعه کنید).</p>
    <p>Listing 11.5. یک repository interface دارای متد save() و getById() است.</p>
    <pre><code class="language-php">interface OrderRepository
{
    /**
     * @throws CouldNotSaveOrder
     */
    public function save(Order $order): void;
    /**
     * @throws CouldNotFindOrder
     */
    public function getById(OrderId $orderId): Order;
}
</code></pre>
    <p>
        The contract که این interface نشان می‌دهد این است که وقتی شما یک Order را با یک OrderId خاص ذخیره کرده‌اید، می‌توانید در هر زمان یک کپی از آن را با ارائه همان OrderId به عنوان یک argument به getById() بازیابی کنید. پس از ایجاد تغییر در Order (در واقع، پس از تغییر آن به هر یک از روش‌هایی که اجازه می‌دهد)، object را می‌توان دوباره با استفاده از save() ذخیره کرد. و همچنین می‌توان آن را با فراخوانی getById() بازیابی کرد. object که شما از OrderRepository دریافت می‌کنید، می‌تواند
    </p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>