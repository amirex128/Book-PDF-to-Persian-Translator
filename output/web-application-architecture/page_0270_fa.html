<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 270</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <pre><code class="language-php">
$this->wasCancelled = true;
        }
    }
}
</code></pre>
    <p>
        Methods که state از entity را تغییر می‌دهند، یا یک action را روی آن انجام می‌دهند، باید هر دو Command methods باشند، یعنی باید یک return type از نوع void داشته باشند.
    </p>
    <p>در حالی که تغییر delivery address یک order یک update ساده خواهد بود، لغو یک order تأثیری بر آنچه شما می‌توانید با order انجام دهید، دارد. همانطور که دیدیم، همین امر در مورد تحویل آن نیز صدق می‌کند. هنگامی که یک order در state "cancelled" قرار دارد، دیگر نمی‌توان آن را تحویل داد. هنگامی که یک order در state "delivered" قرار دارد، دیگر نمی‌توان آن را لغو کرد. هنگامی که یک entity را طراحی می‌کنید، ایجاد یک state machine diagram برای آن مفید خواهد بود، که states ممکن یک entity و actions (state transitions) موجود برای هر state داده شده را مستند می‌کند (به شکل 11.1 مراجعه کنید). unit tests را برای entity خود ایجاد کنید تا ثابت کنید که به درستی state machine را که در نظر داشتید، پیاده‌سازی می‌کند.</p>
    <p>
        <img src="https://via.placeholder.com/300" alt="Figure 11.1. Entity states and state transitions">
        <figcaption>شکل 11.1. Entity states و state transitions</figcaption>
    </p>
    <h4><strong>11.2.4. Don’t think too much about tables</strong></h4>
    <p>object خود، methods و properties خود را بدون نگرانی در مورد persistence طراحی کنید. Mapping داده‌ها به هر نوع database باید یک task جداگانه باشد. entity شما در وهله اول باید یک object با طراحی خوب باشد، صرف نظر از database که در نهایت از ذخیره آن پشتیبانی می‌کند. شما همیشه باید بتوانید یک mapping از object خود به database که می‌خواهید استفاده کنید، تعریف کنید. در واقع، شما می‌توانید اجازه دهید طراحی object شما تعیین کند که کدام storage model بهترین عملکرد را خواهد داشت.</p>
</div>

        </div>
    </div>
    <div class="page-images">
        <div class="page-image"><img src="page_0270/image_1.png" alt="Image from page 270" /></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>