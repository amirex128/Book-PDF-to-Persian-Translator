<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 277</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <h4><strong>11.4.1. Return the identifier of a new entity</strong></h4>
    <p>متدهای Application service، command methods هستند: آن‌ها state entity را تغییر می‌دهند و نباید چیزی را برگردانند. با این حال، هنگامی که یک application service یک entity جدید ایجاد می‌کند (مانند متد createOrder() در Listing 11.7)، شما همچنان می‌توانید ID entity جدید را برگردانید. یک چیزی که یک application service قطعاً نباید برگرداند، کل entity است. همانطور که قبلاً توضیح داده شد، یک entity یک write model با رفتارهای built-in برای تغییر state آن است. نباید برای client هایی که نمی‌خواهند state آن را تغییر دهند، در دسترس باشد. Clients از application services معمولاً controllers هستند و قطعاً نباید state entity را تغییر دهند.</p>
    <p>اگر می‌خواهید اطلاعاتی در مورد entity در response برگردانید، چه؟ در این صورت از ID که توسط application service برای fetch کردن یک view model از view model repository آن برگردانده شده است، استفاده کنید (Listing 11.9 را ببینید).</p>
    <p>Listing 11.9. Fetching یک view model در داخل controller.</p>
    <pre><code class="language-php">
final class OrderController
{
    // ...
    public function createOrderAction(Request $request): Response
    {
        $orderId = $this->orderService->createOrder(/* ... */);
        $order = $this->orderDetailsRepository->getById($orderId);
        return $this->templateRenderer->render(
            'order-details.html.twig',
            [
                'order' => $order
            ]
        );
    }
}
</code></pre>
    <p>برای اطلاعات بیشتر در مورد view models، به بخش 3.5 مراجعه کنید.</p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>