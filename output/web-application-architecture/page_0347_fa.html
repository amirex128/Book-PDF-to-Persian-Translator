<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 347</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>به رفتار خاصی از یک implementation متکی باشند. متدهای تست باید فقط متدهایی را فراخوانی کنند که در interface تعریف شده‌اند. این تضمین می‌کند که implementations از اصل Liskov Substitution، یعنی آن‌ها می‌توانند به ظاهر به عنوان جایگزین برای یکدیگر عمل کنند، پیروی می‌کنند.</p>
    <p>برای repositories، یک contract test، نوع مناسبی از تست است که باید نوشته شود. برای سایر services ها، مانند VatRateProvider، ممکن است خیلی خوب کار نکند. تفاوت این است که این service فقط نیاز به ارائه نوعی پاسخ دارد، اما ما واقعاً نمی‌توانیم در یک contract تعریف کنیم که یک پاسخ خوب چیست، به غیر از اینکه باید یک پاسخ از نوع مناسب باشد، در این مورد VatRate. اما این قبلاً در سطح زبان تضمین شده است، بنابراین نوشتن یک تست برای تأیید اینکه implementations از VatRateProvider یک نمونه از VatRate را برمی‌گرداند، منطقی نیست. اگر آن‌ها این کار را نکنند، "compiler" شکایت خواهد کرد. آنچه در واقع مفید خواهد بود این است که تست کنیم که یک implementation خاص مانند VatRate-ProviderUsingVatApiDotCom قادر است به درستی و به طور موثر با API remote از vatapi.com ارتباط برقرار کند.
        ما قبلاً در مورد تست این class در بخش 6.4 صحبت کردیم، اما Listing 14.4 (کمی اصلاح شده) مثال را که در آنجا مورد بحث قرار دادیم تکرار می‌کند.
    </p>
    <p>Listing 14.4. Integration tests برای VatRateProviderUsingVatApiDotCom.</p>
    <pre><code class="language-php">
final class VatRateProviderUsingVatApiDotComTest extends TestCase
{
    /**
     * @test
     */
    public function it_provides_the_dutch_vat_rate(): void
    {
        $provider = new VatRateProviderUsingVatApiDotCom(
            new VatApi(
                'TEST_API_KEY',
                new HttpClient(
                    'https://vatapi.com'
                )
            )
        );
        self::assertEquals(
            VatRate::fromInt(21),
            $provider->vatRateForSellingEbooksInCountry('NL')
        );
    }
</code></pre>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>