<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 160</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3> External services</h3>
  <pre><code class="language-php">
'TBE',
            'NL',
            'ebooks'
        );

    if ($responseData['filter_match']) {
        // use $responseData['rate']
    } else {
        // use $responseData['rates']['electronic']['rate']
    }
</code></pre>
  <p>این کد فقط برای <strong>API</strong> از راه دور خاصی که ما اکنون از آن استفاده می‌کنیم، کار می‌کند. یک مشکل بزرگتر این است که این کد ممکن است خطاهای <strong>PHP</strong> ایجاد کند. هیچ چیز در مورد نوع بازگشتی <strong>array</strong> وجود ندارد که به ما تضمین دهد که این کلیدها در واقع تعریف شده‌اند. بنابراین کاری که باید انجام دهیم این است که یک طرح کلی واضح از پاسخ تعریف کنیم و یک <strong>object</strong> را برگردانیم که این پاسخ را نشان می‌دهد. استفاده از <strong>objects</strong> آسان‌تر از یک <strong>array</strong> از داده‌ها است زیرا آنها مجموعه‌ای از متدهای از پیش تعریف شده دارند که می‌توانند بدون ترس استفاده شوند. <strong>Objects</strong> همچنین می‌توانند ورودی خود را پس از ساخت، اعتبارسنجی کنند، که استفاده از آنها را ایمن‌تر می‌کند.</p>
  <p>بنابراین بیایید متد <code>vatRateCheck()</code> را با بازگرداندن به عنوان مثال یک <strong>object VatRateCheckResult</strong> بهبود بخشیم. این <strong>object</strong>، داده‌های پاسخ خام را به عنوان یک آرگومان <strong>constructor</strong> دریافت می‌کند، و <strong>getters</strong> را ارائه می‌دهد که می‌دانند چگونه اطلاعات درخواستی را از آن داده‌های پاسخ استخراج کنند (به <strong>Listing</strong> 6.4 مراجعه کنید).</p>
  <p><strong>Listing</strong> 6.4. <code>vatRateCheck()</code> یک <strong>object VatRateCheckResult</strong> تخصصی را برمی‌گرداند.</p>
  <pre><code class="language-php">
final class VatRateCheckResult
{
    private array $responseData;

    public function __construct(array $responseData)
    {
        $this->responseData = $responseData;
    }

    public function rate(string $fallbackType): int
    {
        if ($this->responseData['filter_match']) {
            return (int)$this->responseData['rate'];
</code></pre>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>