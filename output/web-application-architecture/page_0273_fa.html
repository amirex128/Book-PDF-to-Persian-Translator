<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 273</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>the exact same instance، یا یک object که به روشی مشابه با object ذخیره شده، رفتار می‌کند.</p>
    <p>برای پیاده‌سازی‌های OrderRepository که نمونه‌های Order را در یک database واقعی ذخیره می‌کنند، پیاده‌سازی این contract می‌تواند کمی تلاش ببرد. اما ایجاد یک test double برای این contract در واقع واقعاً ساده است (به Listing 11.6 مراجعه کنید).</p>
    <p>Listing 11.6. یک test double برای OrderRepository</p>
    <pre><code class="language-php">
final class InMemoryOrderRepository
    implements OrderRepository
    {
        /**
         * @var array&lt;string,Order&gt;
         */
        private array $orders = [];
        public function save(Order $order): void
        {
            $this->orders[$order->orderId()->asString()] = $order;
        }
        public function getById(OrderId $orderId): Order
        {
            if (!isset($this->orders[$orderId->asString])) {
                throw CouldNotFindOrder::withId($orderId);
            }
            return $this->orders[$orderId->asString()];
        }
    }
</code></pre>
    <p>"That’s too easy!"</p>
    <p>بله، پیاده‌سازی in-memory repository واقعاً ساده است. زمانی که شما repository را پیاده‌سازی کنید که entity را در database واقعی ذخیره می‌کند، اوضاع پیچیده‌تر خواهد شد. همانطور که در فصل 2 بحث کردیم، گزینه‌های مختلفی وجود دارد. شما هنوز هم می‌توانید از یک ORM استفاده کنید و مقداری از logic را با از دست دادن مقداری صراحت و همچنین کنترل واگذار کنید. اگر تصمیم دارید که خودتان بنویسید</p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>