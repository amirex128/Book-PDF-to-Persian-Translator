<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 233</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <h3><strong>8. Validation</strong></h3>
    <pre><code class="language-php">
$request-&gt;get('quantity')
    /* .. */
);
    } catch (UserErrorMessage $exception) {
        $formErrors['general'][] = $exception-&gt;translationKey();
    }
    // ...
}
</code></pre>
    <p>
        هنگامی که شما توانایی ارائه feedback به users را با استفاده از exceptions دارید، ممکن است شروع به حذف برخی از validation code کنید و به جای آن یک UserErrorMessage پرتاب کنید. با این حال، همه exceptions در سطح domain نیازی به روبرو شدن با user ندارند. همانطور که در بخش‌های قبلی مورد بحث قرار دادیم، اکثر مسائل مربوط به validation را می‌توان با ارائه یک user experience خوب، پیشگیری کرد. کمک به user هنگام کار با user interface بهترین راه برای برقراری ارتباط با user است. استفاده از یک exception برای این کار باید آخرین راه‌حل باشد. به عنوان مثال، وقتی از StockRepository تعداد کتاب‌های موجود را درخواست می‌کنیم، و نتواند یک record را در جدول stock_levels پیدا کند، آیا باید یک UserErrorMessage پرتاب کند؟
    </p>
    <p>
        برای پاسخ به این سوال؛ چه دلیلی وجود دارد که این ممکن است شکست بخورد؟ من فقط می‌توانم به دلایلی فکر کنم که یا ما مرتکب یک اشتباه برنامه‌نویسی شده‌ایم، یا user با request data دستکاری کرده است. در هر دو این موقعیت‌ها، منطقی نیست که به user در مورد مشکل بگوییم. ما باید از مشکل مطلع شویم و آن را برطرف کنیم. یا در حالت دوم، آن را نادیده بگیریم، زیرا نمی‌توانیم در مورد آن کاری انجام دهیم.
    </p>
    <p>
        "آیا نباید exceptions فقط در شرایط استثنایی استفاده شوند؟"
    </p>
    <p>
        من این catchphrase را اغلب شنیده‌ام، و اگرچه به طور شهودی ممکن است منطقی به نظر برسد، اما در عمل، این یک advice بسیار مفید نیست. ابتدا باید "exceptional" را تعریف کنید. ما می‌توانیم با "معمولاً اتفاق نمی‌افتد" پیش برویم. اما، چند بار "معمولاً"؟ CouldNotOrderPhysicalBook در مثال بالا در واقع یک مثال عالی از یک exception است که ما فقط در موقعیت‌های استثنایی پرتاب می‌کنیم. فقط زمانی که ما در لحظه انتخاب کتاب توسط user و ارسال فرم، stock خود را تمام می‌کنیم، باید این exception
    </p>
    <p>213</p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>