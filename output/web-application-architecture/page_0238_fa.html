<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 238</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <h3><strong>8. Validation</strong></h3>
    <pre><code class="language-php">
{
    return new self(
        $data['email'],
        $data['ebook_id'],
        $data['quantity'],
        $data['buyer_name']
    );
}
</code></pre>
    <p>
        همانطور که متوجه شده‌اید، نسخه فعلی fromRequestData() قادر به رسیدگی به request dataهای از دست رفته نیست. اگر keys خاصی وجود نداشته باشند، ما برای آنها PHP notices دریافت خواهیم کرد. این متد همچنین هیچ نوع casting انجام نمی‌دهد و اگرچه ما هم نمی‌خواهیم notices را نادیده بگیریم، مطمئناً نمی‌توانیم type errors را نادیده بگیریم.
    </p>
    <p>
        چگونه از یک array از request data (که احتمالاً حتی خالی است) به یک object از نوع OrderEbook که حاوی مقادیری از نوع صحیح است، برسیم؟ در مثال ما، هر value به یک رویکرد متفاوت نیاز دارد:
    </p>
    <ul>
        <li>
            <p>
                property $emailAddress به یک string نیاز دارد، اما ممکن است key از نوع email در $data تعریف نشده باشد.
            </p>
        </li>
        <li>
            <p>
                property $ebookId به یک int نیاز دارد، اما ممکن است key از نوع ebook_id در $data تعریف نشده باشد.
            </p>
        </li>
        <li>
            <p>
                property $quantity به یک int نیاز دارد، اما ممکن است key از نوع quantity در $data تعریف نشده باشد.
            </p>
        </li>
        <li>
            <p>
                property $buyerName به یک string نیاز دارد، اما nullable است. ممکن است key از نوع buyer_name در $data تعریف نشده باشد، یا ممکن است یک رشته خالی باشد، که در این صورت باید آن را به null تبدیل کنیم.
            </p>
        </li>
    </ul>
    <p>
        Listing 8.18 نحوه بهبود متد fromRequestData() را برای رسیدگی به هر یک از این موارد نشان می‌دهد.
    </p>
    <p>
        Listing 8.18. Dealing with undefined keys and type casting.
    </p>
    <pre><code class="language-php">
public static function fromRequestData(array $data): self
{
    return new self(
</code></pre>
    <p>218</p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>