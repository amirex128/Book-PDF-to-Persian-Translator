<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 290</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>نیازی نیست به صراحت به ایجاد یک invoice گفته شود. این به این واقعیت پاسخ خواهد داد که یک order، به طور کامل تحویل داده شده است. شکل 11.4 نشان می‌دهد که چگونه انتقال CreateInvoice subscriber به invoicing module، dependencies مورد نظر را بین این modules ایجاد می‌کند.</p>
    <p>
        <img src="https://via.placeholder.com/300" alt="Figure 11.4. Moving the CreateInvoice subscriber to the Invoicing module,
establishes the correct dependency direction: the Invoicing now
depends on Orders instead of the other way around.">
        <figcaption>شکل 11.4. انتقال CreateInvoice subscriber به Invoicing module، جهت dependency صحیح را ایجاد می‌کند: Invoicing اکنون به جای مسیر دیگر، به Orders وابسته است.</figcaption>
    </p>
    <h4><strong>11.5.2. Delegate to an application service</strong></h4>
    <p>وظیفه برخی از event subscribers ممکن است این باشد که به تغییرات در یک entity با یک update از entity دیگر پاسخ دهند. این یک مورد کلاسیک از Eventual consistency خواهد بود: state system فقط پس از اتمام کار تمام event subscribers consistent خواهد بود. به جای ایجاد تغییر در داخل event subscriber، فراخوانی را به یک application service محول کنید. این application service باید از pattern استاندارد بازیابی یک entity، ایجاد تغییر در آن و ذخیره مجدد آن پیروی کند.</p>
    <p>بیشتر event subscribers باید مستقل از infrastructure باشند و فقط شامل core code باشند زیرا آن‌ها بخش مهمی از use case هستند. اما ممکن است event subscribers مخصوص infrastructure نیز در application شما وجود داشته باشد. به عنوان مثال، subscribers که domain events را log می‌کنند، آن‌ها را به یک queue ارسال می‌کنند، ذخیره می‌کنند</p>
</div>

        </div>
    </div>
    <div class="page-images">
        <div class="page-image"><img src="page_0290/image_1.png" alt="Image from page 290" /></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>