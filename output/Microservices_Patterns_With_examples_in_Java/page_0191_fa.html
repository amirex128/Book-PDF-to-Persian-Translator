<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 191</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3><strong style="color:darkblue">انتشار domain events</strong></h3>
  <ul>
   <li>monitoring domain events برای تأیید اینکه application به درستی رفتار می‌کند.</li>
   <li>Analyzing events برای مدل‌سازی رفتار user.</li>
  </ul>
  <p>
   The trigger برای notification در همه این سناریوها، state change از یک aggregate در database از یک application است.
  </p>
  <h4><strong style="color:darkblue">5.3.2: یک domain event چیست؟</strong></h4>
  <p>
   یک domain event یک class با یک name است که با استفاده از یک فعل past-participle شکل گرفته است. این properties دارد که به طور معنی‌داری event را منتقل می‌کند. هر property یا یک primitive value یا یک value object است. به عنوان مثال، یک class به نام OrderCreated event دارای یک property به نام orderId است.
  </p>
  <p>
   یک domain event معمولاً metadata نیز دارد، مانند event ID و یک timestamp. همچنین ممکن است identity از user را داشته باشد که این تغییر را ایجاد کرده است، زیرا این برای auditing مفید است. metadata می‌تواند بخشی از event object باشد، شاید در یک superclass تعریف شده باشد. از طرف دیگر، event metadata می‌تواند در یک envelope object باشد که event object را wrap می‌کند. ID از aggregate که event را emit کرده است نیز ممکن است بخشی از envelope باشد، نه یک event property صریح.
  </p>
  <p>
   The OrderCreated event، نمونه‌ای از یک domain event است. هیچ fieldی ندارد، زیرا ID از Order بخشی از event envelope است. listing زیر، class از نوع OrderCreated event و class از نوع DomainEventEnvelope را نشان می‌دهد.
  </p>
  <pre><code class="language-java">interface DomainEvent {}
interface OrderDomainEvent extends DomainEvent {}
class OrderCreated implements OrderDomainEvent {}
class DomainEventEnvelope<T extends DomainEvent> {
private String aggregateType;
private Object aggregateId;
private T event;
...
}
</code></pre>
  <p>
   The DomainEvent interface یک marker interface است که یک class را به عنوان یک domain event شناسایی می‌کند. OrderDomainEvent یک marker interface برای events است، مانند OrderCreated، که توسط Order aggregate منتشر می‌شوند. The DomainEventEnvelope یک class است که حاوی event metadata و event object است. این یک generic class است که توسط domain event type پارامتریزه شده است.
  </p>
  <h4><strong style="color:darkblue">5.3.3: Event enrichment</strong></h4>
  <p>
   به عنوان مثال، بیایید تصور کنیم که شما در حال نوشتن یک event consumer هستید که events از نوع Order را process می‌کند. The OrderCreated event class که قبلاً نشان داده شد، جوهر آنچه اتفاق افتاده است را به تصویر می‌کشد. اما event consumer شما ممکن است هنگام process کردن یک
  </p>
  <p>
   Listing 5.1
   <br>
   The OrderCreated event و کلاس DomainEventEnvelope
   <br>
   The event’s
   <br>
   metadata
  </p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>