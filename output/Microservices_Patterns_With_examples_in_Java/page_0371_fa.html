<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 371</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3><span style="font-weight: bold;">Developing component tests</span></h3>
  <h4><span style="font-weight: bold;">THE ORDERSERVICECOMPONENTTESTSTEPDEFINITIONS CLASS</span></h4>
  <p>
   The OrderServiceComponentTestStepDefinitions class هسته اصلی tests است. این
   class، معنی هر step را در component tests از Order Service تعریف می‌کند.
   فهرست زیر، متد usingCreditCard() را نشان می‌دهد، که معنی step به صورت Given using … credit card را تعریف می‌کند.
  </p>
  <pre><code class="language-java">
  @ContextConfiguration(classes =
  OrderServiceComponentTestStepDefinitions.TestConfiguration.class)
  public class OrderServiceComponentTestStepDefinitions {
  ...
  @Autowired
  protected SagaParticipantStubManager sagaParticipantStubManager;
  @Given("using a(.?) (.*) credit card")
  public void useCreditCard(String ignore, String creditCard) {
  if (creditCard.equals("valid"))
  sagaParticipantStubManager
  .forChannel("accountingService")
  .when(AuthorizeCommand.class).replyWithSuccess();
  else if (creditCard.equals("invalid"))
  sagaParticipantStubManager
  </code></pre>
  <p>
   Listing 10.13
   متد @GivenuseCreditCard()، معنی step به صورت Given using … credit card را تعریف می‌کند.
  </p>
  <p>
   As a consumer of the Order Service
   I should be able to create an order
   Scenario: Order authorized
   Given a valid consumer
   Given using a valid credit card
   dockerCompose {
   ...
   }
  </p>
  <pre><code class="language-yaml">
  ftgo-order-service:
  build: .
  ports:
  - "8082:8080"
  </code></pre>
  <p>
   OrderService
   Component
   Test
   Order Service
   docker
   container
   src/component-test/resources/
   createorder.feature
   Docker-compose.yml
   build.gradle
   Written using the
   Cucumber testing framework
   Kafka
   MySQL
   Invokes
   REST API
   Runs
   Runs
   Runs
   Reads command
   and sends
   replies
   Reads events
   Reads
   Uses
   Uses
   OrderService
   Component
   Step
   Deﬁnitions
  </p>
  <p>
   Figure 10.7
   The component tests for Order Service از Cucumber testing framework برای
   execute tests scenarios که با استفاده از Gherkin acceptance testing DSL نوشته شده‌اند، استفاده می‌کنند. The tests از Docker برای اجرا
   Order Service به همراه زیرساخت serviceهای آن، مانند Apache Kafka و MySQL استفاده می‌کنند.
   Send a
   success reply.
   Send a failure
   reply.
  </p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>