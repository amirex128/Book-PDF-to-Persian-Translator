<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 365</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3>Testing microservices:</h3>
  <p>
   <strong>Part 2</strong>
  </p>
  <p>
   <pre><code class="language-java">new TicketDetails(Collections.emptyList())));
}
}</code></pre>
  </p>
  <p>
   KitchenServiceCommandHandler، KitchenService را با آرگومان‌هایی که از message ورودی یک contract مشتق شده‌اند، فراخوانی می‌کند و یک message reply را ایجاد می‌کند که از value بازگشتی مشتق شده است. متد setup() کلاس تست، KitchenService را برای برگرداندن مقادیری که با message خروجی contract مطابقت دارند، پیکربندی می‌کند
  </p>
  <p>
   Integration tests ها و unit tests ها رفتار بخش‌های فردی یک service را تأیید می‌کنند.
   Integration tests ها تأیید می‌کنند که service ها می‌توانند با clients و dependencies هایشان ارتباط برقرار کنند. unit tests ها تأیید می‌کنند که logic یک service صحیح است. هیچ یک از این نوع تست ها، کل service را اجرا نمی‌کنند. به منظور تأیید اینکه یک service به طور کلی کار می‌کند، ما به بالای هرم می‌رویم و نگاهی می‌اندازیم که چگونه component tests ها را بنویسیم.
  </p>
  <h4>10.2</h4>
  <h3>Developing component tests</h3>
  <p>
   تاکنون، ما به نحوه تست کردن کلاس‌های فردی و clusters of classes نگاه کرده‌ایم. اما تصور کنید که اکنون می‌خواهیم تأیید کنیم که Order Service همانطور که انتظار می‌رود، کار می‌کند. به عبارت دیگر، ما می‌خواهیم acceptance tests های service را بنویسیم که آن را به عنوان یک جعبه سیاه در نظر می‌گیرند و رفتار آن را از طریق API آن تأیید می‌کنند. یک رویکرد این است که اساساً end-to-end tests ها را بنویسیم و Order Service و تمام dependencies های transitive آن را deploy کنیم. همانطور که اکنون باید بدانید، این یک روش slow، brittle و گران برای تست کردن یک service است.
  </p>
  <p>
   یک راه بسیار بهتر برای نوشتن acceptance tests ها برای یک service، استفاده از component testing است. همانطور که شکل 10.6 نشان می‌دهد، component tests ها بین integration tests ها و end-to-end tests ها قرار دارند. Component testing، رفتار یک service را در isolation تأیید می‌کند. این، dependencies service را با stubs ها که رفتار آنها را شبیه‌سازی می‌کنند، جایگزین می‌کند. حتی ممکن است از versions های in-memory service های infrastructure مانند databases استفاده کند. در نتیجه، component tests ها نوشتن آنها بسیار آسان‌تر و اجرای آنها سریع‌تر است.
  </p>
  <p>
   من با توصیف مختصر نحوه استفاده از یک DSL testing به نام Gherkin برای نوشتن acceptance tests ها برای service ها، مانند Order Service، شروع می‌کنم. پس از آن، من مسائل مختلف طراحی component testing را مورد بحث قرار می‌دهم. سپس نحوه نوشتن acceptance tests ها را برای Order Service نشان می‌دهم.
  </p>
  <p>
   بیایید نگاهی به نوشتن acceptance tests ها با استفاده از Gherkin بیندازیم.
  </p>
  <p>
   Pattern: Service component test
  </p>
  <p>
   Test a service in isolation. See http://microservices.io/patterns/testing/service-
   component-test.html.
  </p>
  <p>
   <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAlMAAABJCAYAAADkZgZRAAAgAElEQVR4nO3dfXwU5bX3/r7/f/VfA3M0aQxM/yR0z+j7X6Q+gO7u7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v7v
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>