<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 389</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <h3><span style="font-weight: bold;">Developing secure services</span></h3>
  <p>
   3
   The authentication server credentials از API client را تأیید می‌کند و
   یک access token و یک refresh token را برمی‌گرداند.
  </p>
  <p>
   4
   The API gateway access token را در requests که به ser-
   vices ارسال می‌کند، قرار می‌دهد. A service access token را تأیید می‌کند و از آن برای authorization درخواست استفاده می‌کند.
  </p>
  <p>
   An OAuth 2.0-based API gateway می‌تواند login-based clients را با استفاده از یک
   OAuth 2.0 access token به عنوان یک session token authenticates کند. What’s more، وقتی access token
   منقضی می‌شود، می‌تواند یک access token جدید با استفاده از refresh token به دست آورد. Figure 11.5 نشان می‌دهد که چگونه
   یک API gateway می‌تواند از OAuth 2.0 برای مدیریت login-based clients استفاده کند. An API cli-
   ent یک session را با POSTing credentials خود به API gateway’s /login end-
   point آغاز می‌کند. The API gateway یک access token و یک refresh token را به client برمی‌گرداند. The
   API client سپس هر دو token را زمانی که requests را به API gateway انجام می‌دهد، ارائه می‌دهد.
  </p>
  <p>
   The sequence of events به شرح زیر است:
  </p>
  <ol>
   <li>The login-based client credentials خود را به API gateway ارسال می‌کند.</li>
   <li>The API gateway’s Login Handler یک OAuth 2.0 Password Grant request را انجام می‌دهد
    (www.oauth.com/oauth2-servers/access-tokens/password-grant/) به OAuth
    2.0 authentication server.</li>
  </ol>
  <p>
   Order
   Service
   User
   database
   Password grant request
   API gateway
   Spring OAuth2
   Authentication
   Server
   POST/login
   userId=...&password=...
   GET/orders/1
   Cookie: access_token=...;refresh_token...
   HTTP/1.1 200 OK
   Set-Cookie: access_token=...
   Set-Cookie:refresh_token=...
   POST/oauth/token
   userid=...&password=...
   GET /orders/1
   Authorization: Bearer AccessToken
   HTTP/1.1 200 OK
   ...
   {
   "access_token": "AccessToken"
   ...
   }
   Login-based
   client
   Login
   handler
   Session
   authentication
   interceptor
  </p>
  <p>
   Figure 11.5
   A client logs in by POSTing its credentials to the API gateway. The API gateway authenticates the
   credentials با استفاده از OAuth 2.0 authentication server و access token و refresh token را به عنوان cookies برمی‌گرداند.
   A client این tokens را در requests که به API gateway انجام می‌دهد، قرار می‌دهد.
  </p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>