CONTENTS
xiii
8 
External API patterns
253
8.1
External API design issues
254
API design issues for the FTGO mobile client
255
■API design 
issues for other kinds of clients
258
8.2
The API gateway pattern
259
Overview of the API gateway pattern
259
■Benefits and 
drawbacks of an API gateway
267
■Netflix as an example 
of an API gateway
267
■API gateway design issues
268
8.3
Implementing an API gateway
271
Using an off-the-shelf API gateway product/service
271
Developing your own API gateway
273
■Implementing an 
API gateway using GraphQL
279
9 
Testing microservices: Part 1
292
9.1
Testing strategies for microservice architectures
294
Overview of testing
294
■The challenge of testing 
microservices
299
■The deployment pipeline
305
9.2
Writing unit tests for a service
307
Developing unit tests for entities
309
■Writing unit tests for value 
objects
310
■Developing unit tests for sagas
310
■Writing 
unit tests for domain services
312
■Developing unit tests for 
controllers
313
■Writing unit tests for event and message 
handlers
315
10 
Testing microservices: Part 2
318
10.1
Writing integration tests
319
Persistence integration tests
321
■Integration testing REST-based 
request/response style interactions
322
■Integration testing 
publish/subscribe-style interactions
326
■Integration contract 
tests for asynchronous request/response interactions
330
10.2
Developing component tests
335
Defining acceptance tests
336
■Writing acceptance tests using 
Gherkin
337
■Designing component tests
339
■Writing 
component tests for the FTGO Order Service
340
10.3
Writing end-to-end tests
345
Designing end-to-end tests
345
■Writing end-to-end tests
346
Running end-to-end tests
346
 
