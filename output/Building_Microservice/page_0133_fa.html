<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 133</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
  <p>
   شکل 4-10. استفاده از صف‌ها برای ارسال درخواست‌های رزرو سهام
  </p>
  <p>
   بنابراین با یک تعامل ناهمزمان <strong>nonblocking</strong>، microservice که درخواست را دریافت می‌کند یا باید بداند که به طور ضمنی کجا پاسخ را مسیریابی کند یا اینکه به او گفته شود که پاسخ باید به کجا برود. هنگام استفاده از یک صف، ما این مزیت را داریم که چندین درخواست می‌توانند در صف منتظر بمانند تا رسیدگی شوند. این می‌تواند در موقعیت‌هایی کمک کند که درخواست‌ها به اندازه کافی سریع قابل رسیدگی نباشند. microservice می‌تواند درخواست بعدی را زمانی مصرف کند که آماده است، به جای اینکه با تماس‌های زیاد تحت تأثیر قرار گیرد. البته، سپس خیلی چیزها به جذب این درخواست‌ها توسط صف بستگی دارد.
  </p>
  <p>
   وقتی یک microservice به این ترتیب پاسخی دریافت می‌کند، ممکن است نیاز داشته باشد که پاسخ را به درخواست اصلی مرتبط کند. این می‌تواند چالش‌برانگیز باشد، زیرا زمان زیادی ممکن است سپری شده باشد، و بسته به ماهیت <strong>protocol</strong> مورد استفاده، پاسخ ممکن است به همان نمونه microservice که درخواست را ارسال کرده است، بازنگردد. در مثال ما از رزرو سهام به عنوان بخشی از ثبت سفارش، ما باید بدانیم چگونه پاسخ "سهام رزرو شده" را با یک سفارش مشخص مرتبط کنیم تا بتوانیم به پردازش آن سفارش خاص ادامه دهیم. یک راه آسان برای رسیدگی به این موضوع، ذخیره هر <strong>state</strong> مرتبط با درخواست اصلی در یک پایگاه داده است، به طوری که هنگامی که پاسخ می‌رسد، نمونه دریافت‌کننده می‌تواند هر <strong>state</strong> مرتبط را دوباره بارگیری کند و بر این اساس عمل کند.
  </p>
  <p>
   یک نکته آخر: همه اشکال تعامل <strong>request-response</strong> احتمالاً به نوعی رسیدگی به <strong>time-out</strong> نیاز دارند تا از مشکلاتی که در آن سیستم برای چیزی که ممکن است هرگز اتفاق نیفتد، مسدود می‌شود، جلوگیری شود. نحوه پیاده‌سازی این <strong>time-out functionality</strong> می‌تواند بر اساس فناوری پیاده‌سازی متفاوت باشد، اما مورد نیاز خواهد بود.
  </p>
  <p>ما در فصل 12 با جزئیات بیشتری به <strong>time-outs</strong> نگاه خواهیم کرد.</p>
  <p>Pattern: Request-Response Communication | 107</p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        <div class="page-image"><img src="page_0133/image_1.png" alt="Image from page 133" /></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>