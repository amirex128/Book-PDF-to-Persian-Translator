<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 425</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>در مورد <em>AdvertCorp</em>، ما دو مسئله مربوط به <em>time-out</em> (مهلت زمانی) داشتیم. اول، ما یک <em>time-out</em> (مهلت زمانی) از دست رفته در استخر <em>HTTP request</em> (درخواست <em>HTTP</em>) داشتیم، به این معنی که هنگام درخواست از یک کارگر برای ایجاد یک <em>HTTP request</em> (درخواست <em>HTTP</em>) پایین‌دستی، <em>request thread</em> (رشته درخواست) برای همیشه مسدود می‌شد تا زمانی که یک کارگر در دسترس قرار گیرد. ثانیاً، هنگامی که ما در نهایت یک کارگر <em>HTTP</em> در دسترس برای برقراری یک <em>request</em> (درخواست) به سیستم تبلیغات شلغم داشتیم، ما مدت زیادی صبر می‌کردیم قبل از اینکه از تماس دست بکشیم. بنابراین همانطور که شکل 12-3 نشان می‌دهد، ما باید یک <em>time-out</em> (مهلت زمانی) جدید اضافه کنیم و یک مورد موجود را تغییر دهیم.</p>
    <h5>Time-Outs (مهلت زمانی)</h5>
    <p><em>Time-outs</em> (مهلت زمانی) بسیار مفید هستند. <em>Time-outs</em> (مهلت زمانی) را در تمام فراخوانی‌های خارج از فرآیند قرار دهید، و یک <em>time-out</em> (مهلت زمانی) پیش‌فرض را برای همه چیز انتخاب کنید. هنگامی که <em>time-outs</em> (مهلت زمانی) رخ می‌دهد، ثبت کنید، به آنچه اتفاق می‌افتد نگاه کنید، و آنها را بر این اساس تغییر دهید. به زمان‌های پاسخ "عادی" و سالم برای <em>services</em> (سرویس‌های) پایین‌دستی خود نگاه کنید، و از آن برای راهنمایی در تنظیم آستانه <em>time-out</em> (مهلت زمانی) استفاده کنید.</p>
    <p>تنظیم <em>time-out</em> (مهلت زمانی) برای یک فراخوانی <em>service</em> (سرویس) واحد ممکن است کافی نباشد. اگر این <em>time-out</em> (مهلت زمانی) به عنوان بخشی از مجموعه گسترده‌تری از عملیات‌هایی که شما ممکن است بخواهید حتی قبل از وقوع <em>time-out</em> (مهلت زمانی) از آن دست بکشید، چه اتفاقی می‌افتد؟ به عنوان مثال، در مورد <em>AdvertCorp</em>، اگر احتمال زیادی وجود داشته باشد که کاربر قبلاً درخواست را متوقف کرده باشد، هیچ فایده‌ای در انتظار آخرین قیمت‌های شلغم وجود ندارد. در چنین شرایطی، منطقی است که یک <em>time-out</em> (مهلت زمانی) برای کل عملیات در نظر بگیرید و اگر این بودجه <em>time-out</em> (مهلت زمانی) تجاوز کرد، از آن دست بکشید. برای اینکه این کار انجام شود، زمان فعلی باقی‌مانده برای عملیات باید به پایین‌دست منتقل شود. به عنوان مثال، اگر عملیات کلی برای ارائه یک صفحه باید در عرض 1000 میلی‌ثانیه تکمیل می‌شد، و تا زمانی که ما با <em>service</em> (سرویس) تبلیغات شلغم تماس گرفتیم، 300 میلی‌ثانیه از قبل گذشته بود، در این صورت ما باید اطمینان حاصل کنیم که بیش از 700 میلی‌ثانیه برای تکمیل بقیه تماس‌ها صبر نکرده‌ایم.</p>
    <p>فقط در مورد <em>time-out</em> (مهلت زمانی) برای یک فراخوانی <em>service</em> (سرویس) واحد فکر نکنید؛ همچنین در مورد یک <em>time-out</em> (مهلت زمانی) برای کل عملیات فکر کنید، و اگر این بودجه <em>time-out</em> (مهلت زمانی) کلی تجاوز کرد، عملیات را متوقف کنید.</p>
    <h5>Retries (تلاش مجدد)</h5>
    <p>برخی از مشکلات مربوط به فراخوانی‌های پایین‌دستی موقتی هستند. بسته‌ها می‌توانند جابه‌جا شوند، یا <em>gateways</em> (دروازه‌ها) می‌توانند افزایش عجیبی در بار داشته باشند و باعث <em>time-out</em> (مهلت زمانی) شوند. اغلب، تلاش مجدد تماس می‌تواند بسیار منطقی باشد. با بازگشت به آنچه ما به‌تازگی در مورد آن صحبت کردیم، چند بار شما یک صفحه وب را <em>refresh</em> (بازخوانی) کرده‌اید که بارگیری نشده است، فقط برای اینکه متوجه شوید تلاش دوم خوب کار می‌کند؟ این یک <em>retry</em> (تلاش مجدد) در عمل است.</p>
    <p>در نظر گرفتن اینکه چه نوع شکست‌های فراخوانی پایین‌دستی باید <em>retried</em> (تلاش مجدد) شوند، می‌تواند مفید باشد. به عنوان مثال، اگر از یک پروتکل مانند <em>HTTP</em> استفاده می‌کنید، شما ممکن است اطلاعات مفیدی را در کدهای پاسخ دریافت کنید که می‌تواند به شما کمک کند تا تعیین کنید آیا یک <em>retry</em> (تلاش مجدد) تضمین می‌شود یا خیر. اگر شما یک <em>404 Not Found</em> (یافت نشد 404) دریافت کردید، یک <em>retry</em> (تلاش مجدد) بعید است یک ایده مفید باشد. از طرف دیگر، یک <em>503 Service Unavailable</em> (سرویس در دسترس نیست 503) یا یک <em>504 Gateway Time-out</em> (مهلت زمانی دروازه 504) می‌تواند خطاهای موقت در نظر گرفته شود و می‌تواند یک <em>retry</em> (تلاش مجدد) را توجیه کند.</p>
    <p><em>Stability Patterns | 399</em></p>
</div>

        </div>
    </div>
    <div class="page-images">
        <div class="page-image"><img src="page_0425/image_1.png" alt="Image from page 425" /></div>
<div class="page-image"><img src="page_0425/image_2.png" alt="Image from page 425" /></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>