<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 411</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <p>یک تغییری در این رویکرد این است که یک توکن <em>JWT</em> را زمانی که کاربر در ابتدا خود را با سیستم احراز هویت می‌کند، ایجاد کنید و سپس آن توکن <em>JWT</em> را روی دستگاه <em>client</em> (کلاینت) ذخیره کنید. اما شایسته توجه است که چنین توکنی باید برای مدت زمان جلسه وارد شده معتبر باشد؛ همانطور که قبلاً بحث کردیم، ما می‌خواهیم مدت اعتبار <em>credentials</em> (اعتبارنامه‌های) تولید شده توسط سیستم را محدود کنیم تا شانس سوءاستفاده از آنها را کاهش دهیم، و تأثیر را در صورتی که ما نیاز به تغییر کلیدهایی داشته باشیم که برای تولید توکن رمزگذاری شده استفاده می‌شوند، کاهش دهیم. تولید یک توکن <em>JWT</em> بر اساس هر <em>request</em> (درخواست) به نظر می‌رسد رایج‌ترین راه‌حل برای این مشکل است، همانطور که در شکل 11-9 نشان می‌دهیم.</p>
    <p>داشتن نوعی تبادل توکن که در <em>gateway</em> (دروازه) انجام می‌شود، همچنین می‌تواند اتخاذ استفاده از توکن‌های <em>JWT</em> را بدون نیاز به تغییر هیچ بخشی از جریان <em>authentication</em> (احراز هویت) که شامل ارتباط با دستگاه <em>client</em> (کلاینت) است، بسیار آسان‌تر کند—اگر شما قبلاً یک راه‌حل <em>SSO</em> (ورود به سیستم یکپارچه) در جای خود دارید، پنهان کردن این واقعیت که حتی از توکن‌های <em>JWT</em> استفاده می‌شود، از جریان احراز هویت اصلی کاربر، چنین تغییری را کم‌اثر می‌کند.</p>
    <p>بنابراین با تولید توکن‌های <em>JWT</em> مناسب، <em>microservices</em> (ریز سرویس‌های) پایین‌دستی ما قادر هستند تمام اطلاعات مورد نیاز خود را برای تأیید هویت کاربری که <em>request</em> (درخواست) را انجام می‌دهد، و همچنین اطلاعات اضافی مانند گروه‌ها یا نقش‌هایی که آن کاربر در آن قرار دارد، دریافت کنند. اعتبار این توکن نیز می‌تواند توسط <em>microservice</em> (ریز سرویس) به سادگی با بررسی امضای توکن <em>JWT</em> تأیید شود. در مقایسه با راه‌حل‌های قبلی در این فضا (مانند ادعاهای <em>SAML</em> تو در تو)، توکن‌های <em>JWT</em> فرآیند <em>decentralizing authorization</em> (مجوزدهی غیرمتمرکز) در یک معماری <em>microservice</em> (ریز سرویس) را بسیار ساده‌تر کرده‌اند.</p>
    <h5>Challenges (چالش‌ها)</h5>
    <p>چندین مسئله در مورد توکن‌های <em>JWT</em> وجود دارد که ارزش توجه را دارد. اولین مورد مسئله کلیدها است. در مورد توکن‌های <em>JWT</em> امضا شده، برای تأیید یک امضا، دریافت‌کننده یک توکن <em>JWT</em> به مقداری اطلاعات نیاز دارد که باید خارج از <em>band</em> (باند) منتقل شود—معمولاً یک کلید عمومی. تمام مسائل مربوط به مدیریت کلید در این مورد اعمال می‌شود. <em>microservice</em> (ریز سرویس) چگونه کلید عمومی را دریافت می‌کند؟ اگر کلید عمومی نیاز به تغییر داشته باشد، چه اتفاقی می‌افتد؟ <em>Vault</em> نمونه‌ای از ابزاری است که می‌تواند توسط یک <em>microservice</em> (ریز سرویس) برای بازیابی (و مدیریت چرخش) کلیدهای عمومی استفاده شود، و قبلاً برای کار در یک محیط بسیار توزیع‌شده طراحی شده است. البته شما می‌توانید فقط یک کلید عمومی را در یک فایل پیکربندی برای <em>microservice</em> (ریز سرویس) دریافت‌کننده <em>hardcode</em> (کدنویسی) کنید، اما سپس شما با مشکل تغییر کلید عمومی مواجه خواهید شد.</p>
    <p>ثانیاً، درست کردن انقضا برای یک توکن می‌تواند دشوار باشد اگر زمان پردازش طولانی درگیر باشد. موقعیتی را در نظر بگیرید که در آن یک مشتری سفارشی را ثبت کرده است.
    این یک سری از فرآیندهای ناهمزمان را آغاز می‌کند که می‌تواند ساعت‌ها اگر نه روزها طول بکشد، بدون هیچ‌گونه مشارکت بعدی از طرف مشتری (پرداخت، ارسال ایمیل‌های اطلاع‌رسانی، بسته‌بندی و ارسال کالا، و غیره). آیا شما باید یک توکن با مدت اعتبار منطبق تولید کنید؟ سؤال اینجاست که، در چه مرحله‌ای داشتن یک توکن با عمر طولانی‌تر، مشکل‌سازتر از نداشتن هیچ توکنی است؟ من با چند تیم صحبت کرده‌ام که با این مسئله سروکار داشته‌اند. برخی یک توکن ویژه با عمر طولانی‌تر تولید کرده‌اند که فقط در این زمینه خاص کار می‌کند؛ بقیه</p>
    <p><em>Authentication and Authorization | 377</em></p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>