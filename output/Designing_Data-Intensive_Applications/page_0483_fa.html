<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 483</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
    <p>
        ثبت می‌شود در یک <strong>ledger</strong> <em>append-only</em>، که اساساً یک
        <strong>log</strong> از رویدادهایی است که پول، کالا یا خدماتی را که
        جابه‌جا شده‌اند، شرح می‌دهد. حساب‌ها، مانند سود و زیان یا ترازنامه، از
        تراکنش‌های <strong>ledger</strong> با جمع کردن آن‌ها مشتق
        می‌شوند [53].
    </p>
    <p>
        اگر اشتباهی رخ دهد، حسابداران تراکنش نادرست را در <strong>ledger</strong> پاک
        نمی‌کنند یا تغییر نمی‌دهند—در عوض، آن‌ها یک تراکنش دیگر اضافه
        می‌کنند که این اشتباه را جبران می‌کند، به عنوان مثال بازپرداخت یک
        هزینه‌ی نادرست. تراکنش نادرست همچنان برای همیشه در <strong>ledger</strong>
        باقی می‌ماند، زیرا ممکن است به دلایل حسابرسی مهم باشد. اگر
        ارقام نادرست، که از <strong>ledger</strong> نادرست استخراج شده‌اند، قبلاً
        منتشر شده باشند، سپس ارقام برای دوره حسابداری بعدی شامل یک
        اصلاحیه می‌شود. این فرآیند در حسابداری کاملاً طبیعی است [54].
    </p>
    <p>
        اگرچه این <em>auditability</em> به‌ویژه در سیستم‌های مالی مهم است، اما
        برای بسیاری از سیستم‌های دیگری که مشمول چنین مقررات سختی
        نیستند نیز مفید است. همان‌طور که در "فلسفه خروجی‌های فرآیند
        <strong>batch</strong>" در صفحه 413 بحث شد، اگر شما به‌طور تصادفی کد
        اشکال‌داری را مستقر کنید که داده‌های بد را در یک پایگاه داده
        می‌نویسد، بازیابی بسیار سخت‌تر است اگر کد بتواند به‌صورت
        مخرب داده‌ها را بازنویسی کند. با یک <strong>log</strong> <em>append-only</em> از
        رویدادهای <em>immutable</em>، تشخیص این‌که چه اتفاقی افتاده است و
        بازیابی از مشکل بسیار آسان‌تر است.
    </p>
    <p>
        رویدادهای <em>immutable</em> همچنین اطلاعات بیشتری را نسبت به
        وضعیت فعلی ثبت می‌کنند. به عنوان مثال، در یک وب‌سایت خرید،
        یک مشتری ممکن است یک آیتم را به سبد خرید خود اضافه کند و
        سپس دوباره آن را حذف کند. اگرچه رویداد دوم، رویداد اول را از
        نظر تکمیل سفارش لغو می‌کند، اما ممکن است برای اهداف
        <strong>analytics</strong> مفید باشد که بدانیم مشتری در حال بررسی یک
        آیتم خاص بود اما سپس از آن منصرف شد. شاید آن‌ها در آینده
        تصمیم بگیرند آن را بخرند، یا شاید جایگزینی پیدا کردند. این
        اطلاعات در یک <strong>event log</strong> ثبت شده است، اما در یک پایگاه
        داده که آیتم‌ها را هنگام حذف از سبد خرید حذف می‌کند، از بین
        می‌رود [42].
    </p>

    <h4>استخراج چندین <strong>views</strong> از همان <strong>event log</strong></h4>
    <p>
        علاوه بر این، با جدا کردن <strong>mutable state</strong> از <strong>event log</strong>
        <em>immutable</em>، شما می‌توانید چندین نمایش با جهت‌گیری
        <em>read</em> مختلف را از همان <strong>log</strong> رویدادها استخراج کنید. این
        عمل دقیقاً مانند داشتن چندین <strong>consumer</strong> از یک <strong>stream</strong>
        (شکل 11-5) است: به عنوان مثال، پایگاه داده‌ی تحلیلی <strong>Druid</strong>
        مستقیماً از <strong>Kafka</strong> با استفاده از این رویکرد استفاده می‌کند [55]،
        <strong>Pistachio</strong> یک <strong>key-value store</strong> توزیع شده است که از
        <strong>Kafka</strong> به‌عنوان یک <strong>commit log</strong> استفاده می‌کند [56]، و
        <strong>Kafka Connect sinks</strong> می‌تواند داده‌ها را از <strong>Kafka</strong> به
        پایگاه‌های داده و <strong>indexes</strong> مختلف صادر کند [41]. برای بسیاری
        از سیستم‌های ذخیره‌سازی و index، مانند <strong>search servers</strong>، منطقی
        است که ورودی خود را به‌طور مشابه از یک <strong>log</strong> توزیع شده دریافت
        کنند (نگاه کنید به "همگام نگه داشتن سیستم‌ها" در صفحه 452).
    </p>
    <p>
        داشتن یک گام ترجمه صریح از یک <strong>event log</strong> به یک پایگاه داده،
        تکامل برنامه شما را در طول زمان آسان‌تر می‌کند: اگر شما
        می‌خواهید یک <strong>feature</strong> جدید را معرفی کنید که داده‌های موجود
        شما را به روشی جدید نشان می‌دهد، شما می‌توانید از <strong>event log</strong>
        برای ساختن یک <strong>view</strong> جداگانه که برای خواندن بهینه شده است
        برای <strong>feature</strong> جدید، و اجرا کردن آن در کنار <strong>Frontend</strong> های
        موجود
        پایگاه‌های داده و جریان‌ها
        |
        457
    </p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>