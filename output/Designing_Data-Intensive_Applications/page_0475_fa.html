<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 475</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
             <div>
    <p>
        مورد X: <strong>client</strong> 1 می‌خواهد مقدار را روی A تنظیم کند، و <strong>client</strong> 2
        می‌خواهد آن را روی B تنظیم کند. هر دو <strong>clients</strong> ابتدا مقدار جدید را
        در پایگاه داده می‌نویسند، سپس آن را در index جستجو می‌نویسند. با توجه به
        زمان‌بندی نامناسب، درخواست‌ها با هم تداخل دارند: پایگاه داده ابتدا نوشته
        شده از <strong>client</strong> 1 را می‌بیند که مقدار را روی A تنظیم می‌کند، سپس
        نوشته شده از <strong>client</strong> 2 را می‌بیند که مقدار را روی B تنظیم می‌کند،
        بنابراین مقدار نهایی در پایگاه داده B است. index جستجو ابتدا نوشته شده
        از <strong>client</strong> 2 را می‌بیند، سپس <strong>client</strong> 1، بنابراین مقدار نهایی در
        index جستجو A است. دو سیستم اکنون به‌طور دائم با یکدیگر ناسازگار
        هستند، حتی اگر هیچ خطایی رخ نداده باشد.
    </p>
    <p>
        شکل 11-4. در پایگاه داده، X ابتدا روی A و سپس روی B تنظیم می‌شود، در حالی
        که در index جستجو، نوشتن‌ها به ترتیب معکوس می‌رسند.
    </p>
    <p>
        مگر این‌که شما یک مکانیسم تشخیص <strong>concurrency</strong> اضافی داشته
        باشید، مانند <strong>version vectors</strong> که ما در "تشخیص نوشتن‌های
        همزمان" در صفحه 184 بحث کردیم، شما حتی متوجه نخواهید شد که
        نوشتن‌های همزمان رخ داده است—یک مقدار به‌سادگی و بی‌صدا مقدار
        دیگری را بازنویسی می‌کند.
    </p>
    <p>
        یکی دیگر از مشکلات <strong>dual writes</strong> این است که یکی از نوشته‌ها ممکن
        است شکست بخورد در حالی که دیگری موفق شود. این یک مشکل تحمل
        خطا است تا یک مشکل <strong>concurrency</strong>، اما همچنین این اثر را دارد که
        دو سیستم با یکدیگر ناسازگار می‌شوند. اطمینان از این‌که آن‌ها یا هر دو
        موفق شوند یا هر دو شکست بخورند، یک مورد از مشکل <strong>atomic commit</strong>
        است، که حل کردن آن پرهزینه است (نگاه کنید به "<strong>Atomic Commit</strong>
        و <strong>Two-Phase Commit (2PC)</strong>" در صفحه 354).
    </p>
    <p>
        اگر شما فقط یک پایگاه داده‌ی <em>replicated</em> با یک <strong>leader</strong> واحد دارید،
        سپس آن <strong>leader</strong> ترتیب نوشتن‌ها را تعیین می‌کند، بنابراین رویکرد
        <strong>state machine replication</strong> در بین <strong>replicas</strong> های پایگاه داده
        عمل می‌کند. با این حال، در شکل 11-4 یک <strong>leader</strong> واحد وجود
        ندارد: پایگاه داده ممکن است یک <strong>leader</strong> داشته باشد و index جستجو
        ممکن است یک <strong>leader</strong> داشته باشد، اما هیچ‌کدام دیگری را دنبال
        نمی‌کنند، و بنابراین درگیری‌ها می‌توانند رخ دهند (نگاه کنید به
        "<strong>Multi-Leader Replication</strong>" در صفحه 168).
    </p>
    <p>
        اگر واقعاً فقط یک <strong>leader</strong> وجود داشت—به عنوان مثال، پایگاه
        داده—و اگر ما می‌توانستیم index جستجو را یک <strong>follower</strong> از
        پایگاه داده بسازیم، وضعیت بهتر می‌بود. اما آیا این در عمل امکان‌پذیر
        است؟
        پایگاه‌های داده و جریان‌ها
        |
        453
    </p>
 </div>
 
        </div>
    </div>
    <div class="page-images">
        <div class="page-image"><img src="page_0475/image_1.png" alt="Image from page 475" /></div>

    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>