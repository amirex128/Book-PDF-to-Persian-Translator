<!DOCTYPE html>
<html lang="fa" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>صفحه 144</title>
    <link rel="stylesheet" href="fontiran.css">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css" rel="stylesheet" />
    <link href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css" rel="stylesheet" />
    <style>
        @page {
            size: A4;
            margin: 2cm;
        }
        body {
            font-family: IRANSansX, Tahoma, Arial, sans-serif;
            line-height: 1.8;
            text-align: right;
            direction: rtl;
            margin: 0;
            padding: 20px;
            box-sizing: border-box;
            background-color: white;
        }
        .chapter-content {
            margin-bottom: 20px;
            text-align: right;
            direction: rtl;
        }
        .translated-content {
            font-size: 14pt;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .page-images {
            text-align: center;
            margin: 20px 0;
            page-break-before: always;
        }
        .page-image {
            margin: 10px 0;
            text-align: center;
        }
        .page-image img {
            max-width: 100%;
            height: auto;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .code-block {
            direction: ltr;
            text-align: left;
            background-color: #f5f5f5;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            margin: 15px 0;
            font-family: 'Courier New', Courier, monospace;
        }
        .english-text {
            direction: ltr;
            text-align: left;
            display: inline-block;
        }
        .heading {
            color: #2c3e50;
            margin-top: 25px;
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        .paragraph {
            margin-bottom: 15px;
            text-align: right;
            direction: rtl;
        }
        ul, ol {
            padding-right: 20px;
            padding-left: 0;
            text-align: right;
            direction: rtl;
        }
        li {
            margin-bottom: 10px;
            text-align: right;
            direction: rtl;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin: 15px 0;
            text-align: right;
            direction: rtl;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: right;
            direction: rtl;
        }
        th {
            background-color: #f8f9fa;
        }
        @media print {
            body {
                margin: 0;
                padding: 0;
            }
            .page-break {
                page-break-before: always;
            }
        }
    </style>
</head>
<body>
    <div class="chapter-content">
        <div class="translated-content">
            <div>
    <h4>Avro</h4>
    <p>
        Apache Avro [20] یک binary encoding format دیگر است که به طور جالبی با Protocol Buffers و Thrift متفاوت است. این در سال 2009 به عنوان یک subproject از Hadoop شروع شد، در نتیجه عدم تناسب Thrift با use cases Hadoop [21].
    </p>
    <p>
        Avro همچنین از یک schema برای مشخص کردن structure از data که encoding می‌شود، استفاده می‌کند. این دو schema languages دارد: یکی (Avro IDL) برای editing انسانی در نظر گرفته شده است، و دیگری (بر اساس JSON) که خواندن آن توسط machine آسان‌تر است.
    </p>
    <p>
        Our example schema، که در Avro IDL نوشته شده است، ممکن است به این صورت باشد:
    </p>
    <pre><code class="language-avro">record Person {
    string               userName;
    union { null, long } favoriteNumber = null;
    array&lt;string&gt;        interests;
}
</code></pre>
    <p>
        The equivalent JSON representation از آن schema به شرح زیر است:
    </p>
    <pre><code class="language-json">{
    "type": "record",
    "name": "Person",
    "fields": [
        {"name": "userName",       "type": "string"},
        {"name": "favoriteNumber", "type": ["null", "long"], "default": null},
        {"name": "interests",      "type": {"type": "array", "items": "string"}}
    ]
}
</code></pre>
    <p>
        First of all, توجه داشته باشید که هیچ tag numbers در schema وجود ندارد. اگر ما record مثال خودمان (Example 4-1) را با استفاده از این schema encoding کنیم، the Avro binary encoding فقط 32 بایت طول دارد—compact‌ترین از تمام encodings که ما دیده‌ایم. تفکیک the encoded byte sequence در شکل 4-5 نشان داده شده است.
    </p>
    <p>
        اگر شما byte sequence را بررسی کنید، شما می‌توانید ببینید که هیچ چیزی برای شناسایی fields یا datatypes آن‌ها وجود ندارد. The encoding به سادگی از values که در کنار هم concatenated شده‌اند، تشکیل شده است. A string فقط یک length prefix است که با bytes UTF-8 دنبال می‌شود، اما در داده‌های encoded چیزی وجود ندارد که به شما بگوید که این یک string است. به همان اندازه می‌تواند یک integer، یا چیزی کاملاً متفاوت باشد. یک integer با استفاده از یک variable-length encoding (همانند CompactProtocol از Thrift) encoding می‌شود.
    </p>
    <p>
        122 | Chapter 4: Encoding and Evolution
    </p>
</div>

        </div>
    </div>
    <div class="page-images">
        
    </div>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', (event) => {
            if (window.Prism) {
                Prism.highlightAll();
            }
        });
    </script>
</body>
</html>