<!DOCTYPE html>
<html lang="fa">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>page_0012</title>
    <link rel="stylesheet" href="fontiran.css">
    <!-- Add Prism CSS for syntax highlighting -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/themes/prism.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.css">
    <style>
        @page {
            size: A4;
            margin: 1.5cm;
        }
        html, body {
            height: 100%;
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'IRANSansX', 'Tahoma', 'Arial', sans-serif;
            line-height: 1.5;
            background-color: #f8f9fa;
            /* A4 size enforcement */
            width: 21cm;
            height: 29.7cm;
        }
        .container {
            width: 18cm; /* A4 width minus margins */
            min-height: 26.7cm; /* A4 height minus margins */
            background-color: white;
            padding: 1cm;
            box-sizing: border-box;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
        }
        .persian-translation {
            text-align: right;
            direction: rtl;
            font-size: 1em;
            font-family: 'IRANSansX', 'Tahoma', 'Arial', sans-serif;
            margin-bottom: 20px;
            /* Don't hide any overflow text, let it flow naturally */
            overflow: visible;
        }
        /* Style for code blocks */
        pre[class*="language-"] {
            direction: ltr;
            text-align: left;
            border-radius: 5px;
            margin: 1em 0;
            font-size: 0.9em;
            overflow-x: auto;
            white-space: pre-wrap;
        }
        code {
            direction: ltr;
            font-family: 'Courier New', Courier, monospace;
            background-color: #f5f5f5;
            border-radius: 3px;
            padding: 2px 4px;
        }
        .page-images {
            margin: 1cm 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 1cm;
        }
        .page-image {
            max-width: 100%;
            height: auto;
            object-fit: contain;
        }
        .page-number {
            text-align: center;
            margin-top: 10px;
            font-size: 0.9em;
            color: #777;
        }
        @media print {
            body {
                background: none;
                width: 21cm;
                height: 29.7cm;
            }
            .container {
                box-shadow: none;
                padding: 1cm;
                height: auto;
                min-height: auto;
            }
            /* Page break utility */
            .page-break {
                page-break-before: always;
            }
            /* Ensure code blocks print with background colors */
            pre[class*="language-"] {
                print-color-adjust: exact;
                -webkit-print-color-adjust: exact;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div dir='rtl' class='persian-translation'><p><b>مقدمه</b></p>
<p><b>2. چرا جداسازی از زیرساخت اینقدر مهم است؟</b></p>
<p>جدا کردن نگرانی‌های زیرساخت از منطق اصلی برنامه، منجر به مدل دامنه‌ای می‌شود که می‌توان به شیوه‌ای مبتنی بر دامنه توسعه داد. همچنین منجر به کد برنامه‌ای می‌شود که آزمایش آن بسیار آسان است و به روشی مبتنی بر آزمون توسعه می‌یابد.</p>
<p>در نهایت، تست‌ها تمایل به ثبات بیشتر و اجرا با سرعت بالاتر نسبت به تست‌های عملکردی معمولی الهام گرفته از چارچوب دارند.</p>
<p>حمایت هم‌زمان از طراحی مبتنی بر دامنه (DDD) و توسعه مبتنی بر آزمون (TDD) ویژگی ارزشمندی از هر سیستم نرم‌افزاری است. اما جدا کردن زیرساخت از نگرانی‌های دامنه با استفاده از این الگوهای طراحی، دو مزیت دیگر به شما می‌دهد.</p>
<p>بدون تلاش زیاد، می‌توانید از مجموعه استاندارد لایه‌ها (که به لایه‌های دامنه، کاربرد و زیرساخت معروف می‌شوند) استفاده کنید.</p>
<p>علاوه بر این، می‌توانید به راحتی موارد استفاده‌ای که جدا شده‌اند را به عنوان پورت و کد پیاده‌سازی حمایتی را به عنوان آداپتور علامت‌گذاری کنید.</p>
<p>استفاده از لایه‌ها، پورت‌ها و آداپتورها روشی عالی برای استانداردسازی معماری سطح بالای شما است، که آن را برای همه آسان‌تر می‌کند تا کد را درک کنند، مراقبت از آن را به عهده بگیرند و آن را ادامه دهند.</p>
<p>و تعجب بزرگ که من اکنون به شما می‌گویم این است که با جدا کردن کد اصلی از کد زیرساخت، همه این‌ها به طور رایگان به دست می‌آید.</p>
<p>اگر برنامه شما قرار است بیشتر از دو سال زنده بماند، پس جداسازی از زیرساخت شرطی ایمن است.</p>
<p>زیرساخت‌های اطراف مانند چارچوب‌ها، سرویس‌های وب از راه دور، سیستم‌های ذخیره‌سازی و غیره احتمالاً با نرخی متفاوت نسبت به مدل دامنه و موارد استفاده شما تغییر خواهند کرد.</p>
<p>هرچه در دنیای فناوری اطراف برنامه شما اتفاق بیفتد، کد اصلی باارزشتان توسط آن مختل نخواهد شد.</p>
<p>هر دو می‌توانند با سرعت خود تکامل یابند.</p>
<p>به‌روزرسانی به نسخه بعدی چارچوب شما، مهاجرت به یک پس‌زمینه ذخیره‌سازی متفاوت یا تغییر به یک ارائه دهنده پرداخت متفاوت، هزینه‌ای به اندازه زمانی که کد اصلی و زیرساختی همچنان با هم مخلوط شده بودند، نخواهد داشت.</p>
<p>وابستگی‌ها به کد یا سیستم‌های خارجی همیشه ایزوله خواهند شد و اگر تغییری لازم باشد، بلافاصله خواهید دانست که کجا باید آن را اعمال کنید.</p>
<p>از سوی دیگر، اگر برنامه شما قرار نیست بیشتر از دو سال دوام بیاورد، این ممکن است دلیل خوبی برای بی‌توجهی به روشی که در این کتاب ارائه شده است، باشد. با این حال، من فقط یک یا دو مورد از این قبیل برنامه‌ها را در زندگی خود دیده‌ام.</p>
<p>xi</p>

</div>
        
        
        
        <div class="page-number">
            12
        </div>
    </div>
    
    <!-- Add Prism JS for syntax highlighting -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/components/prism-core.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/autoloader/prism-autoloader.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.29.0/plugins/line-numbers/prism-line-numbers.min.js"></script>
    <script>
        // Initialize Prism highlighting
        document.addEventListener('DOMContentLoaded', (event) => {
            /* Add line-numbers class to all pre elements if not already there */
            document.querySelectorAll('pre').forEach(block => {
                if (!block.classList.contains('line-numbers')) {
                    block.classList.add('line-numbers');
                }
                
                /* If language class is not specified, add 'language-clike' as default */
                let hasLanguageClass = false;
                block.classList.forEach(className => {
                    if (className.startsWith('language-')) {
                        hasLanguageClass = true;
                    }
                });
                
                if (!hasLanguageClass) {
                    block.classList.add('language-clike');
                }
                
                /* Ensure code elements inside pre also have the correct language class */
                const codeElement = block.querySelector('code');
                if (codeElement) {
                    if (!hasLanguageClass) {
                        codeElement.classList.add('language-clike');
                    } else {
                        /* Copy the language class from pre to code if code doesn't have it */
                        block.classList.forEach(className => {
                            if (className.startsWith('language-') && !codeElement.classList.contains(className)) {
                                codeElement.classList.add(className);
                            }
                        });
                    }
                }
            });
            
            /* Re-highlight all code blocks */
            if (window.Prism) {
                Prism.highlightAll();
            }
            
            /* Smart image scaling based on page content */
            const container = document.querySelector('.container');
            const textElement = document.querySelector('.persian-translation');
            const imageContainer = document.querySelector('.page-images');
            
            if (imageContainer && textElement) {
                const images = imageContainer.querySelectorAll('.page-image');
                if (images.length > 0) {
                    /* Calculate available space */
                    const containerHeight = container.clientHeight;
                    const textHeight = textElement.clientHeight;
                    const pageNumberHeight = document.querySelector('.page-number').clientHeight;
                    const availableHeight = containerHeight - textHeight - pageNumberHeight - 40; /* Extra margins */
                    
                    /* Estimate total height of images */
                    let totalImageHeight = 0;
                    images.forEach(img => {
                        /* Wait for image to load to get accurate height */
                        img.onload = function() {
                            /* Get natural aspect ratio */
                            const ratio = img.naturalWidth / img.naturalHeight;
                            /* Calculate height based on max width */
                            const estimatedHeight = (img.clientWidth / ratio);
                            totalImageHeight += estimatedHeight + 40; /* Add gap */
                            
                            /* Check if images don't fit */
                            if (totalImageHeight > availableHeight) {
                                /* Try to scale down by up to 30% */
                                const scaleFactor = Math.max(0.7, availableHeight / totalImageHeight);
                                
                                /* If even with 30% reduction it doesn't fit, set page-break */
                                if (scaleFactor < 0.7) {
                                    imageContainer.classList.add('page-break');
                                } else {
                                    /* Scale images to fit */
                                    images.forEach(i => {
                                        i.style.maxWidth = (scaleFactor * 100) + '%';
                                    });
                                }
                            }
                        };
                        
                        /* Force layout calculation in case image is already loaded */
                        if (img.complete) {
                            img.onload();
                        }
                    });
                }
            }
        });
    </script>
</body>
</html>